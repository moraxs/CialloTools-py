var M=(t,g,l)=>new Promise((o,d)=>{var v=n=>{try{u(l.next(n))}catch(m){d(m)}},_=n=>{try{u(l.throw(n))}catch(m){d(m)}},u=n=>n.done?o(n.value):Promise.resolve(n.value).then(v,_);u((l=l.apply(t,g)).next())});/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{a5 as C,aK as k,aL as B,aM as N,r as y,c as P,o as E,b as R,aN as V,aw as O,y as T,ao as z,aO as A,aP as J,z as D,a7 as S,D as r,F as b,G as U,aq as K,H as F,A as e,C as s,I as c,B as p,aQ as j,aR as q,aS as G,az as H,aA as L}from"./index.ac3b1fc8.js";const Q={name:"ServerStatus",components:{IconMoonFill:k,IconSunFill:B,IconFaceFrownFill:N},setup(){const t=y({}),g=y(null),l=y(1),o=y(null),d=y(!1),v=y(""),_=P(()=>t.value.cpuUsage?Number((t.value.cpuUsage/100).toFixed(2)):0),u=P(()=>t.value.maxMemory&&t.value.usedMemory?Number((t.value.usedMemory/t.value.maxMemory).toFixed(2)):0),n=()=>M(this,null,function*(){try{const a="http://127.0.0.1:443",I="db322d9c-b738-48a0-9194-94e81d82ee53",h=yield U.post(`${a}/muip/auth_admin`,{admin_key:I,key_type:"PEM"});if(h.data.code!==0)throw new Error("\u6388\u6743\u5931\u8D25");const w=h.data.data.sessionId,f=yield U.get(`${a}/muip/server_information`,{params:{SessionId:w},headers:{Accept:"application/json, text/plain, */*"}});if(f.data.code===0)t.value=f.data.data,d.value=!1;else throw new Error("\u83B7\u53D6\u670D\u52A1\u5668\u4FE1\u606F\u5931\u8D25")}catch(a){d.value=!0,v.value=a.toJSON?JSON.stringify(a.toJSON()):a.message,K.error(a.message||"\u8BF7\u6C42\u5931\u8D25")}}),m=()=>{let a=10;l.value=1,o.value=setInterval(()=>{a-=1,l.value=a/10,a<=0&&(a=10)},1e3)},x=()=>{d.value=!1,v.value="",n()};return E(()=>{n(),g.value=setInterval(n,1e4),m()}),R(()=>{clearInterval(g.value),clearInterval(o.value)}),{serverInfo:t,cpuUsagePercent:_,memoryUsagePercent:u,countdownPercent:l,hasError:d,errorMessage:v,refresh:x}}},i=t=>(H("data-v-5f46ca31"),t=t(),L(),t),W={class:"card-title"},X=i(()=>e("span",null,"\u670D\u52A1\u5668\u72B6\u6001",-1)),Y=i(()=>e("strong",null,"CPU \u4F7F\u7528\u7387\uFF1A",-1)),Z=i(()=>e("strong",null,"CPU \u578B\u53F7\uFF1A",-1)),$=i(()=>e("strong",null,"\u7CFB\u7EDF\u7248\u672C\uFF1A",-1)),ee=i(()=>e("strong",null,"\u5185\u5B58\u4F7F\u7528\u7387\uFF1A",-1)),oe=i(()=>e("strong",null,"\u6700\u5927\u5185\u5B58\uFF1A",-1)),te=i(()=>e("strong",null,"\u5DF2\u7528\u5185\u5B58\uFF1A",-1)),ae=i(()=>e("strong",null,"\u7A0B\u5E8F\u4F7F\u7528\u5185\u5B58\uFF1A",-1)),ne=i(()=>e("ul",null,[e("li",null,"\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC"),e("li",null,"\u5C06\u4E0A\u65B9\u62A5\u9519\u4FE1\u606F\u53CD\u9988\u7ED9\u670D\u52A1\u5668\u7BA1\u7406\u5458")],-1));function re(t,g,l,o,d,v){const _=V,u=j,n=q,m=O,x=T("IconFaceFrownFill"),a=z,I=G,h=A,w=J;return F(),D("div",null,[o.hasError?b("",!0):(F(),S(m,{key:0,bordered:""},{title:r(()=>[e("div",W,[X,s(_,{size:"mini",status:"warning",percent:o.countdownPercent,style:{"margin-left":"20px",width:"100px"}},null,8,["percent"])])]),default:r(()=>[s(n,{gutter:16},{default:r(()=>[s(u,{span:12},{default:r(()=>[e("div",null,[s(_,{type:"circle",percent:o.cpuUsagePercent,style:{width:"100px"},color:{"0%":"rgb(var(--primary-6))","100%":"rgb(var(--success-6))"},format:f=>`${(f*100).toFixed(0)}%`},null,8,["percent","color","format"]),e("p",null,[Y,c(p((o.cpuUsagePercent*100).toFixed(0))+"%",1)]),e("p",null,[Z,c(p(o.serverInfo.cpuModel),1)]),e("p",null,[$,c(p(o.serverInfo.systemVersion),1)])])]),_:1}),s(u,{span:12},{default:r(()=>[e("div",null,[s(_,{type:"circle",percent:o.memoryUsagePercent,style:{width:"100px"},color:{"0%":"rgb(var(--primary-6))","100%":"rgb(var(--success-6))"},format:f=>`${(f*100).toFixed(0)}%`},null,8,["percent","color","format"]),e("p",null,[ee,c(p((o.memoryUsagePercent*100).toFixed(0))+"%",1)]),e("p",null,[oe,c(p(o.serverInfo.maxMemory)+" MB",1)]),e("p",null,[te,c(p(o.serverInfo.usedMemory)+" MB",1)]),e("p",null,[ae,c(p(o.serverInfo.programUsedMemory)+" MB",1)])])]),_:1})]),_:1})]),_:1})),o.hasError?(F(),S(w,{key:1,status:"error",title:"\u83B7\u53D6\u670D\u52A1\u5668\u72B6\u6001\u5931\u8D25"},{icon:r(()=>[s(x)]),subtitle:r(()=>[c(p(o.errorMessage),1)]),extra:r(()=>[s(a,{type:"primary",onClick:o.refresh},{default:r(()=>[c("Refresh")]),_:1},8,["onClick"])]),default:r(()=>[s(h,{style:{background:"var(--color-fill-2)",padding:"24px"}},{default:r(()=>[s(I,null,{default:r(()=>[c("Try:")]),_:1}),ne]),_:1})]),_:1})):b("",!0)])}const ve=C(Q,[["render",re],["__scopeId","data-v-5f46ca31"]]);export{ve as default};
